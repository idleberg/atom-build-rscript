"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("events"),t=require("atom-satisfy-dependencies"),r=require("child_process"),i=require("os"),s="build-rscript";function n(e){return atom.config.get(`${s}.${e}`)}exports.activate=function(){!0===n("manageDependencies")&&t.satisfyDependencies("build-rscript")},exports.config={customArguments:{title:"Custom Arguments",description:"Specify your preferred arguments for `Rscript`, supports [replacement](https://github.com/noseglid/atom-build#replacement) placeholders",type:"string",default:"{FILE_ACTIVE}",order:0},manageDependencies:{title:"Manage Dependencies",description:"When enabled, third-party dependencies will be installed automatically",type:"boolean",default:!0,order:1},alwaysEligible:{title:"Always Eligible",description:"The build provider will be available in your project, even when not eligible",type:"boolean",default:!1,order:2}},exports.provideBuilder=function(){return class extends e.EventEmitter{constructor(e){super(),this.cwd=e,atom.config.observe("build-rscript.customArguments",(()=>this.emit("refresh")))}getNiceName(){return"Rscript"}isEligible(){if(!0===n("alwaysEligible"))return!0;return!!r.spawnSync("win32"===i.platform()?"where":"which",["Rscript"])?.stdout?.toString()}settings(){return[{name:"Rscript",exec:"Rscript",args:["{FILE_ACTIVE}"],cwd:"{FILE_ACTIVE_PATH}",sh:!1,atomCommandName:"rscript:run"},{name:"Rscript (user)",exec:"Rscript",args:n("customArguments").trim().split(" "),cwd:"{FILE_ACTIVE_PATH}",sh:!1,atomCommandName:"rscript:run-with-custom-arguments"}]}}};
//# sourceMappingURL=provider.js.map
